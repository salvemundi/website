services:
  web:
    build: ./apps/web
    restart: unless-stopped
    networks:
      - dev-public
      - dev-mesh
    env_file: .env
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"

  finance:
    build: ./services/finance
    restart: unless-stopped
    networks:
      - dev-mesh
    env_file: .env
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"

  email:
    build: ./services/email
    restart: unless-stopped
    networks:
      - dev-mesh
    env_file: .env
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"

  identity:
    build: ./services/identity
    restart: unless-stopped
    networks:
      - dev-mesh
    env_file: .env
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"

  notifications:
    build: ./services/notifications
    restart: unless-stopped
    networks:
      - dev-mesh
    env_file: .env
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"

networks:
  dev-public:
    external: true
  dev-mesh:
    internal: true
